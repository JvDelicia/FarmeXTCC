@{
}

<!-- Main Content -->
<section class="content-wrap">

    <!-- Banner -->
    <div class="myndie-banner banner-top myndie-banner-parallax small">
        <div class="image" style="background-image: url('../../assets/images/game-diablo-iii-1400x656.jpg')">
        </div>

        <div class="myndie-user-navigation">
            <!-- Tabs -->
            <div role="tabpanel">

                <!-- Nav tabs -->
                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active">
                        <a href="#home" aria-controls="home" role="tab" data-toggle="tab">Home</a>
                    </li>
                    <li role="presentation">
                        <a href="#profile" aria-controls="profile" role="tab" data-toggle="tab active">Profile</a>
                    </li>
                    <li role="presentation">
                        <a href="#messages" aria-controls="messages" role="tab" data-toggle="tab active">Messages</a>
                    </li>
                    <li role="presentation">
                        <a href="#settings" aria-controls="settings" role="tab" data-toggle="tab active">Settings</a>
                    </li>
                </ul>



            </div>
            <!-- /Tabs -->
            @*<div class="container">
                    <ul class="nav nav-tabs" id="TabProfile" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="activity-tab" data-toggle="tab" href="#activity" role="tab" aria-controls="activity" aria-selected="true">Activity</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="settings-tab" data-toggle="tab" href="#settings" role="tab" aria-controls="settings" aria-selected="false">Settings</a>
                        </li>
                        @if (Session["DevId"] == null)
                        {
                            <li class="nav-item">
                                <a class="nav-link" id="upgrade-tab" data-toggle="tab" href="#upgrade" role="tab" aria-controls="upgrade" aria-selected="false">Upgrade to Developer</a>
                            </li>
                        }
                        @if (Session["DevId"] != null)
                        {
                            <li class="nav-item">
                                <a class=" btn btn-outline-danger" href="../Developer/ProfileView">Developer Profile</a>
                            </li>
                        }
                        @if (Session["ModId"] != null)
                        {
                            <li class="nav-item">
                                <a class="btn btn-outline-danger" href="../Moderator/ProfileView">Moderator Profile</a>
                            </li>
                        }
                    </ul>
                </div>*@
        </div>

        <div class="info">
            <div>
                <div class="container myndie-user">
                    <a href="~/assets/images/user-photo.jpg" class="angled-img image-popup">
                        <div class="img">
                            <img src="~/assets/images/user-avatar.jpg" alt="">
                        </div>
                        <i class="entypo-search icon"></i>
                    </a>
                    <!--
                        -->
                    <div class="user-data">
                        <h2>John Doe</h2>
                        <div class="location"><i class="entypo-map-marker"></i> Los Angeles</div>
                        <div class="activity">
                            <div>
                                <div class="num">69</div>
                                <div class="title">Posts</div>
                            </div>
                            <div>
                                <div class="num">12</div>
                                <div class="title">Games</div>
                            </div>
                            <div>
                                <div class="num">689</div>
                                <div class="title">Followers</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container mt-20">
                    <a href="#!" class="btn btn-sm btn-default ml-0">Add Friend</a>
                    <a href="#!" class="btn btn-sm btn-default">Private Message</a>
                </div>
            </div>
        </div>
    </div>
    <!-- /Banner -->
    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="home">
            Blowfish librantur in se quatuor, quinquies maior quam normalis, et quare? Quare id faciam? Ut terrorem facit, qui quid. Terrent! Ut alter, scarier pisces agminis off. Et quod tu es? Vos blowfish. Tu iustus in omnibus visio.
        </div>
        <div role="tabpanel" class="tab-pane" id="profile">
            Nonne vides quid sit? Tu es ... Jesse me respice. Tu ... blowfish sunt. A blowfish! Cogitare. Statura pusillus, nec sapientium panem, nec artificum.
        </div>
        <div role="tabpanel" class="tab-pane" id="messages">
            Sed predators facile prædam blowfish secretum telum non se habet. Non ille? Quid faciam blowfish, Isai. Blowfish quid faciat? In blowfish inflat, purus?
        </div>
        <div role="tabpanel" class="tab-pane" id="settings">
            Vides ... suus ' suus 'non aliud aerem. Nunc ... qui cum partibus blowfish Isai? Tu damnare ius. Vos blowfish. Dicere iterum. Dicere illam quasi velis eam. Es BLOWFISH!
        </div>
    </div>

    @* Tab Content  *@
    <div class="tab-content" id="TabProfileContent">
        <div class="tab-pane fade show active" id="activity" role="tabpanel" aria-labelledby="activity-tab">Alooooo</div>

        <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">Disney</div>

        <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
            <center>
                <br />
                <form role="form" id="Update" class="needs-validation" method="post" @*action="/User/Update"*@ enctype="multipart/form-data" onsubmit="return AjaxPostUpdateProfile(this)">
                    <div class="form-row">
                        <div class="col">
                            <label for="Name">Name</label>
                            <input type="text" class="form-control" id="Name" value="@ViewBag.User.Name" placeholder="Name" required name="user.Name" />
                            <div class="invalid-tooltip">
                                Please choose a valid Name.
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="Email">Email</label>
                            <input type="email" class="form-control" id="Email" value="@ViewBag.User.Email" placeholder="Email" required name="user.Email" />
                            <div class="invalid-tooltip">
                                Please choose a valid Email.
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col">
                            <label for="Country">Country</label><br />
                            <select class="custom-select" required id="user.CountryId" name="user.CountryId">
                                @foreach (var c in ViewBag.Country)
                                {
                                    <option value="@c.Id" selected="@c.Id.Equals(ViewBag.User.CountryId)"> @c.Name</option>
                                }
                            </select>
                            <div class="invalid-tooltip">
                                Please choose a valid Country.
                            </div>
                        </div>
                        <div class="col">
                            <label for="Language">Language</label><br />
                            <select class="custom-select" required id="user.LanguageId" name="user.LanguageId">
                                @foreach (var l in ViewBag.Lang)
                                {
                                    <option value="@l.Id" selected="@l.Id.Equals(ViewBag.User.LanguageId)"> @l.Name</option>
                                }
                            </select>
                            <div class="invalid-tooltip">
                                Please choose a valid Country.
                            </div>
                        </div>
                    </div>
                    <br /><br />
                    <input type="submit" value="Update" class="btn btn-danger" />
                </form>
                <br />
                <div class="@ViewBag.Class" style="width:80%;" role="alert">
                    @Html.ValidationMessage("User.Name")<br />
                    @Html.ValidationMessage("User.Email")<br />
                    @Html.ValidationMessage("User.CountryId")<br />
                    @Html.ValidationMessage("User.LanguageId")<br />
                </div>
                <br />
                <hr />
                <br /><br />
                <h2>Change Password</h2>
                <form class="needs-validation" method="post" action="/User/ChangePassword">
                    <div class="form-row">
                        <div class="col">
                            <label for="Password">Password</label>
                            <input type="password" class="form-control" id="Password" placeholder="Password" required name="psw" />
                            <div class="invalid-tooltip">
                                Please choose a valid Password.
                            </div>
                        </div>
                        <div class="col-6">
                            <label for="Confirm">Confirm Password</label>
                            <input type="password" class="form-control" id="ConfirmPassword" placeholder="Confirm Password" required name="cpsw" />
                            <div class="invalid-tooltip">
                                Please choose a valid Password.
                            </div>
                        </div>
                    </div>
                    <input type="submit" value="Change Password" class="btn btn-danger" />
                    <br />
                    @Html.ValidationMessage("User.Password4")<br />@Html.ValidationMessage("User.PasswordDM")<br />
                </form>
            </center>

        </div>

        <div class="tab-pane fade" id="upgrade" role="tabpanel" aria-labelledby="upgrade-tab">
            <br />
            <a href="../Developer/Register" class="btn btn-outline-danger">Upgrade to Developer</a>
            <br />
            <br />
            <a href="../Moderator/Register" class="btn btn-outline-danger">Upgrade to Moderator</a>
        </div>
    </div>


</section>



<script>
    (function () {
        'use strict';
        window.addEventListener('load', function () {
            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            var forms = document.getElementsByClassName('needs-validation');
            // Loop over them and prevent submission
            var validation = Array.prototype.filter.call(forms, function (form) {
                form.addEventListener('submit', function (event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();
</script>

@*<script>
        $('#Update').validator().on('submit', function (e) {
            if (e.isDefaultPrevented()) {
                alert('form is not valid');
            } else {
                e.preventDefault();
                alert('form is valid');
                //Ajax



            }
        });


    </script>*@

<script>
    function AjaxPostUpdateProfile(formData) {
        var ajaxConfig = {
            type: "post",
            url: "/User/Update",
            data: new FormData(formData),
            success: function (result) {
                alert(result);
                window.location.href = "/User/Profile";
            }
        }
        if ($(formData).attr('enctype') == "multipart/form-data") {
            ajaxConfig["contentType"] = false;
            ajaxConfig["processData"] = false;
        }
        $.ajax(ajaxConfig);
        return false;
    }
</script>

@*<script>
        function AjaxPostChangePass(formData) {
            var ajaxConfig = {
                type: "post",
                url: "/User/ChangePassword",
                data: new FormData(formData),
                success: function (result) {
                    if (!(result == "Error")) {
                        alert(result);
                        window.location.href = "/User/Profile";
                    }
                }
            }
            if ($(formData).attr('enctype') == "multipart/form-data") {
                ajaxConfig["contentType"] = false;
                ajaxConfig["processData"] = false;
            }
            $.ajax(ajaxConfig);
            return false;
        }
    </script>*@

<!-- /Main Content -->
